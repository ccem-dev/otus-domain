<link href="app/project/configuration/stage/stage-configuration-style.css" rel="stylesheet" type="text/css">

<md-content layout="row" layout-align="center center" flex>
    <md-content layout="column" layout-padding flex="80" flex-xs="100" layout-margin>
        <span class="md-headline">{{$ctrl.stageValues.titles.main}}</span>
        <span class="md-subheader">{{$ctrl.stageValues.titles.secondary}}</span>

        <div layout="column" layout-align="start start" ng-show="$ctrl.isEditStage">
            <form name="$ctrl.stageForm" layout-fill novalidate ng-submit="$ctrl.saveStage()">
                <md-input-container class="md-block form-group" layout-fill>
                    <label>{{$ctrl.stageValues.titles.inputName}}</label>
                    <input class="form-control" type="text" ng-model="$ctrl.stage.name"
                           ng-value="$ctrl.stage.name" name="name" ng-required="true"/>
                    <div ng-messages="$ctrl.stageForm.$error">
                        <small ng-show="$ctrl.stageForm.$dirty"
                               ng-message="required">{{$ctrl.stageValues.errors.required}}</small>
                    </div>
                </md-input-container>

                <md-button type="submit" class="md-fab md-fab-bottom-right" aria-label="action button"
                           ng-if="$ctrl.isEditStage">
                    <md-icon ng-if="$ctrl.isEditStage">{{$ctrl.stageValues.buttons.save.icon}}</md-icon>
                    <md-tooltip md-direction="top" ng-if="$ctrl.isEditStage">{{$ctrl.stageValues.buttons.save.text}}
                    </md-tooltip>
                </md-button>

                <md-button type="reset" class="md-fab md-fab-bottom-left md-mini md-accent md-raised"
                           ng-if="$ctrl.isEditStage" ng-click="$ctrl.reload()"
                           aria-label="cancel button"
                           aria-label={{$ctrl.stageValues.buttons.cancel.text}}>
                    <md-icon>{{$ctrl.stageValues.buttons.cancel.icon}}</md-icon>
                    <md-tooltip md-direction="top">{{$ctrl.stageValues.buttons.cancel.text}}</md-tooltip>
                </md-button>
            </form>
        </div>
        <div layout="row" layout-wrap flex="100" layout-align="start start" layout-fill>
            <md-list layout-align="start center" flex="100" ng-if="$ctrl.stages.length">
                <md-subheader class="md-no-sticky">{{$ctrl.stageValues.titles.listStages}}</md-subheader>
                <md-list-item class="md-2-line"
                              ng-repeat="stage in $ctrl.stages track by $index"
                              ng-click="$ctrl.editStage(stage)">
                    <md-icon>{{$ctrl.stageValues.icon.stage}}</md-icon>
                    <div class="md-list-item-text">
                        <span>{{stage.name}}</span>
                    </div>
                    <md-button class="md-mini md-icon-button" ng-click="$ctrl.removeStage(stage)">
                        <md-icon>{{$ctrl.stageValues.buttons.delete.icon}}</md-icon>
                        <md-tooltip md-direction="left">{{$ctrl.stageValues.buttons.delete.text}}</md-tooltip>
                    </md-button>
                    <md-divider></md-divider>
                </md-list-item>
            </md-list>
            <span class="md-title" ng-if="!$ctrl.stages.length">{{$ctrl.stageValues.titles.emptyList}}</span>
        </div>

    </md-content>
    <md-button class="md-fab md-fab-bottom-right" aria-label="action button" ng-click="$ctrl.addStage()"
               ng-if="!$ctrl.isEditStage">
        <md-icon md-svg-icon={{$ctrl.stageValues.buttons.add.icon}} ng-if="!$ctrl.isEditStage"></md-icon>
        <md-tooltip md-direction="top" ng-if="!$ctrl.isEditStage">{{$ctrl.stageValues.buttons.add.text}}</md-tooltip>
    </md-button>
</md-content>
