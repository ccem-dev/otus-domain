!function(){angular.module("otusDomain",["dependencies","otusDomain.dashboard","otusDomain.authenticator","otusDomain.installer","otusDomain.repository","otusDomain.project","otusDomain.project.fieldCenter","otusDomain.project.configuration","otus.domain.client","otus.client","otusDomain.user","utils"])}(),function(){"use strict";angular.module("otusDomain.authenticator",[])}(),function(){angular.module("dependencies",["ngMaterial","ngMessages","ngAnimate","ui.mask","ui.router"])}(),function(e){e.__env=e.__env||{},e.__env.apiUrl="http://api-domain.localhost:8080"}(this),function(){function e(e,t,o){var n=t.__env;e.setUrl(n.apiUrl),o.reloadLoggedUser()}angular.module("otusDomain").run(["RestResourceService","$window","UserService",e])}(),function(){function e(e){e.formatDate=function(e){return moment(e).format("DD/MM/YYYY")},e.parseDate=function(e){var t=moment(e,"DD/MM/YYYY",!0);return t.isValid()?t.toDate():new Date(NaN)}}angular.module("otusDomain").config(["$mdDateLocaleProvider",e])}(),function(){function e(e){e.errorOnUnhandledRejections(!1)}angular.module("otusDomain").config(e),e.$inject=["$qProvider"]}(),function(){"use strict";function e(e,t,o,n,r,i,a){function s(){var e=o.defer();return a.isLogged()?e.resolve():e.reject({redirectTo:i.LOGIN}),e.promise}function c(){var e=o.defer();return a.isLogged()?e.reject({redirectTo:i.HOME}):e.resolve(),e.promise}function u(){var e=o.defer();return n.hasProject()?e.resolve():e.reject({redirectTo:i.HOME}),e.promise}function l(){var e=o.defer(),t=a.getInstallerResource();return t.ready(function(t){t.data?e.resolve():e.reject({redirectTo:i.INSTALLER})}),e.promise}function f(){var e=o.defer(),t=a.getInstallerResource();return t.ready(function(t){t.data?e.reject({redirectTo:i.LOGIN}):e.resolve()}),e.promise}var d=this;d.loggedUser=s,d.alreadyLogged=c,d.selectedProject=u,d.initialConfiguration=l,d.onlyOneConfiguration=f,t.$on("$stateChangeError",function(t,o,n,r,i,a){t.preventDefault(),a.redirectTo?e.go(a.redirectTo):e.go("error",{status:a.status})})}angular.module("otusDomain").service("RouteRulesResolver",e),e.$inject=["$state","$rootScope","$q","ProjectContext","DashboardStateService","APP_STATE","RestResourceService"]}(),function(){function e(e,t){var o="app/dashboard/menu/dashboard-menu.html",n="app/dashboard/template/main-dashboard-template.html";e.state("installer",{url:"/installer",resolve:{onlyOneConfiguration:function(e){return e.onlyOneConfiguration()}},views:{"system-wrap":{templateUrl:"app/installer/initial/initial-config.html",controller:"InitialConfigController as initialConfigController"},"repository-config@installer":{templateUrl:"app/survey-repository/repository.html",controller:"InitialConfigController as initialConfigController"}}}).state("login",{url:"/login",resolve:{loggedUser:function(e){return e.alreadyLogged()},initialConfiguration:function(e){return e.initialConfiguration()}},views:{"system-wrap":{templateUrl:"app/authenticator/login/login.html",controller:"LoginController",controllerAs:"loginController"}}}).state("user-register",{url:"/user/register",resolve:{initialConfiguration:function(e){return e.initialConfiguration()}},views:{"system-wrap":{templateUrl:"app/user/management/registry/user-register.html",controller:"UserRegisterController",controllerAs:"userRegisterController"}}}).state("user-activation",{url:"/user/activation",resolve:{loggedUser:function(e){return e.loggedUser()}},views:{"system-wrap":{templateUrl:n,controller:"DashboardMenuController as dashboardMenu"},"dashboard-menu@user-activation":{templateUrl:o},"system-content@user-activation":{templateUrl:"app/user/management/activation/user-activation.html",controller:"UserActivationController",controllerAs:"$ctrl"}}}).state("user-otus-management",{url:"/project/user",resolve:{loggedUser:function(e){return e.loggedUser()},selectedProject:function(e){return e.selectedProject()}},views:{"system-wrap":{templateUrl:n,controller:"DashboardMenuController as dashboardMenu"},"dashboard-menu@user-otus-management":{templateUrl:o},"system-content@user-otus-management":{template:'<otus-user flex="80"></otus-user>'}}}).state("field-center",{url:"/project/centers",resolve:{loggedUser:function(e){return e.loggedUser()},selectedProject:function(e){return e.selectedProject()},loadCenters:function(e){e.loadCenters()}},views:{"system-wrap":{templateUrl:n,controller:"DashboardMenuController as dashboardMenu"},"dashboard-menu@field-center":{templateUrl:o},"system-content@field-center":{templateUrl:"app/project/fieldCenter/field-center-template.html",controller:"FieldCenterController",controllerAs:"fieldCenterController"}}}).state("home",{url:"/home",resolve:{loggedUser:function(e){return e.loggedUser()}},views:{"system-wrap":{templateUrl:n,controller:"DashboardMenuController as dashboardMenu"},"dashboard-menu@home":{templateUrl:o},"system-content@home":{templateUrl:"app/dashboard/template/dashboard-content-template.html"},"section-info@home":{templateUrl:"app/dashboard/home/home-info-section.html"},"section-view@home":{templateUrl:"app/dashboard/home/home-view-section.html"},"section-commands@home":{templateUrl:"app/dashboard/home/home-commands-section.html"}}}).state("configuration-center",{url:"/project/configuration",resolve:{loggedUser:function(e){return e.loggedUser()},selectedProject:function(e){return e.selectedProject()}},views:{"system-wrap":{templateUrl:n,controller:"DashboardMenuController as dashboardMenu"},"dashboard-menu@configuration-center":{templateUrl:o},"system-content@configuration-center":{templateUrl:"app/project/configuration/configuration-template.html",controller:"otusjs.otus-domain.project.configuration.ProjectConfigurationController",controllerAs:"configController"}}}).state("offline",{url:"/offline",views:{"system-wrap":{templateUrl:"app/response-error/offline/offline.html",controller:"ResponseErrorOfflineController as controller"}}}),t.otherwise("/login")}angular.module("otusDomain").config(["$stateProvider","$urlRouterProvider",e]).constant("APP_STATE",{LOGIN:"login",USER_REGISTER:"user-register",INSTALLER:"installer",HOME:"home",USER_ACTIVATION:"user-activation",USER_ACTIVATION_IN_PROJECT:"user-otus-management",PROJECT_CENTER:"field-center",ERROR_OFFLINE:"offline",PROJECT_CONFIGURATION:"configuration-center"})}(),function(){function e(e,t){e.theme("layoutTheme").primaryPalette("blue",{"default":"A200","hue-1":"200"}).accentPalette("blue-grey",{"default":"900","hue-1":"50"}).warnPalette("red"),t.defaultIconSet("app/assets/img/icons/mdi.svg",24)}angular.module("otusDomain").config(["$mdThemingProvider","$mdIconProvider",e])}(),function(){"use strict";angular.module("otusDomain.installer",["passwordControl"])}(),function(){"use strict";angular.module("otusDomain.dashboard",[])}(),function(){"use strict";angular.module("otusDomain.project",["ngMaterial"])}(),function(){"use strict";angular.module("otusDomain.repository",[])}(),function(){"use strict";angular.module("otusDomain.user",["otusDomain.user.management"])}(),function(){"use strict";function e(e,t,o,n,r){var i="Login Inválido! Verifique os dados informados.";e.authenticate=function(e){r.authenticate(e).then(function(){t.goToHome()},function(){n.show(n.simple().textContent(i))})},e.register=function(){t.goToUserRegister()}}angular.module("otusDomain.authenticator").controller("LoginController",e),e.$inject=["$scope","DashboardStateService","RestResourceService","$mdToast","UserService"]}(),angular.module("passwordControl",[]).directive("stPassword",function(){return{require:"ngModel",restrict:"A",link:function(e,t,o,n){var r=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])/;e.$watch(function(){return n.$modelValue},function(e){r.test(e)&&e.length>=6&&e.length<=32?n.$setValidity("passwordPattern",!0):n.$setValidity("passwordPattern",!1)})}}}).directive("stPasswordMatch",function(){return{require:"ngModel",restrict:"A",scope:{stPasswordMatch:"="},link:function(e,t,o,n){function r(e,t){e!==t?n.$setValidity("passwordMatch",!1):n.$setValidity("passwordMatch",!0)}e.$watch(function(){return e.stPasswordMatch},function(e){r(e,n.$modelValue)}),e.$watch(function(){return n.$modelValue},function(t){r(e.stPasswordMatch,t)})}}}),function(){var e=angular.module("utils",[]);e.service("StringNormalizer",[function(){function e(e){for(var t=e.indexOf("-")!==-1?"-":".",o=e.split(t),n=o.length,r=o[0].toLowerCase(),i=1;i<n;i++){var a=o[i].slice(0,1),s=o[i].slice(1);r=r.concat(a.toUpperCase().concat(s.toLowerCase()))}return r}var t=this;t.normalizeString=e}])}(),function(){"use strict";function e(e,t,o,n,r,i){function a(){v=i.getRepositoryResource(),h=i.getInstallerResource()}function s(e){o.isLoading=!0,h.config(e,function(e){e.data?u():c(e.MESSAGE),o.isLoading=!1})}function c(e){t.show(t.simple().textContent(j))}function u(){var e=n.alert().title("Informação").content(C).ok("ok");n.show(e)["finally"](function(){r.goToLogin()})}function l(e){h.validationEmail(e,function(e){m(e.data)})}function f(e){v.validateCredentials(e,function(e){p(e.data)})}function d(e){v.validateConnection(e,function(e){g(e.data)})}function m(e){o.initialConfigSystemForm.emailSenderEmail.$setValidity("emailService",e),o.initialConfigSystemForm.$setValidity("emailService",e)}function p(e){o.initialConfigSystemForm.repositoryUsername.$setValidity("credentials",e),o.initialConfigSystemForm.repositoryPassword.$setValidity("credentials",e),o.initialConfigSystemForm.$setValidity("credentials",e)}function g(e){o.initialConfigSystemForm.repositoryHost.$setValidity("connection",e),o.initialConfigSystemForm.repositoryPort.$setValidity("connection",e),o.initialConfigSystemForm.$setValidity("credentials",e)}self=this;var v,h,C="Seu cadastro foi realizado com sucesso! Você vai ser redirecionado para a tela de login.",j="Houve um erro ao instalar seu projeto. Verifique os dados informados";self.register=s,self.validateEmailService=l,self.validateCredentials=f,self.validateRepositoryConnection=d,self.validateEmailService=l,a()}angular.module("otusDomain.installer").controller("InitialConfigController",e),e.$inject=["$q","$mdToast","$scope","$mdDialog","DashboardStateService","RestResourceService"]}(),function(){"use strict";function e(e,t,o,n,r){function i(){v.currentState="Login"}function a(){v.currentState="Login",e.go(o.LOGIN)}function s(){v.currentState="Instalador do Sistema",e.go(o.INSTALLER)}function c(){v.currentState="Cadastro de Usuário",e.go(o.USER_REGISTER)}function u(){v.currentState="Home",e.go(o.HOME)}function l(){v.currentState="Liberação de Usuários",e.go(o.USER_ACTIVATION)}function f(){v.currentState="Liberação de usuários no projeto selecionado",e.go(o.USER_ACTIVATION_IN_PROJECT)}function d(){v.currentState="Centros",e.go(o.PROJECT_CENTER)}function m(){v.currentState="Configurações de Projeto",e.go(o.PROJECT_CONFIGURATION)}function p(){v.currentState="Offline",e.go(o.ERROR_OFFLINE)}function g(){var e=n.getAuthenticatorResource();e.invalidate(function(){n.removeSecurityToken(),r.removeSecurityToken(),a()})}var v=this;v.goToLogin=a,v.goToHome=u,v.goToInstaller=s,v.goToUserRegister=c,v.goToUserActivation=l,v.goToUserActivationInProject=f,v.goToProjectCenters=d,v.goToProjectConfiguration=m,v.goToErrorOffline=p,v.logout=g,i()}angular.module("otusDomain.dashboard").service("DashboardStateService",e),e.$inject=["$state","$http","APP_STATE","RestResourceService","OtusRestResourceService"]}(),function(){"use strict";function e(){}angular.module("otusDomain.dashboard").controller("HomeController",e),e.$inject=[]}(),function(){"use strict";function e(e,t,o,n,r){function i(){return t.currentState}function a(){o("left").toggle()}function s(){o("left").close()}function c(){t.goToHome(),s()}function u(){t.goToSurveyForms(),s()}function l(){t.goToUserActivation(),s()}function f(){t.goToUserActivationInProject(),s()}function d(){t.goToProjectCenters(),s()}function m(){t.goToProjectConfiguration(),s()}function p(){e.showDialog().onConfirm(t.logout)}var g=this;g.getSelectedSystemArea=i,g.open=a,g.close=s,g.openHome=c,g.openSurveyForms=u,g.openUserActivation=l,g.logout=p,g.openProjectCenters=d,g.openUserActivationInProject=f,g.openProjectConfiguration=m}angular.module("otusDomain.dashboard").controller("DashboardMenuController",e),e.$inject=["LogoutDialogService","DashboardStateService","$mdSidenav","ProjectSelectionService","ProjectContext"]}(),function(){"use strict";angular.module("otusDomain.project.configuration",["ngMaterial"])}(),function(){"use strict";function e(e){}angular.module("otusDomain.project.configuration").controller("otusjs.otus-domain.project.configuration.ProjectConfigurationController",e),e.$inject=["otusjs.otus-domain.project.configuration.ProjectConfigurationService"]}(),function(){"use strict";function e(e,t){function o(){u=e.getProjectConfigurationResource()}function n(){var e=t.defer();return u.getSurveys(function(t){"data"in t?e.resolve(t.data):e.reject(!0)}),e.promise}function r(e){var o=t.defer();return u.updateSurveyTemplateType({acronym:e.acronym,newSurveyFormType:e.type},function(e){e.data?o.resolve(!0):o.reject(!0)}),o.promise}function i(e){var o=t.defer();return u.deleteSurveyTemplate({acronym:e},function(e){e.data?o.resolve(!0):o.reject(!0)}),o.promise}function a(e){var o=t.defer();return u.publishTemplate(e,function(e){"data"in e?o.resolve(e.data):o.reject(e.MESSAGE)}),o.promise}function s(){var e=t.defer();return u.getVisualIdentity(function(t){e.resolve()}),e.promise}function c(e){var o=t.defer();return u.updateVisualIdentity(e,function(){o.resolve()}),o.promise}var u,l=this;o(),l.fetchSurveysManagerConfiguration=n,l.publishTemplate=a,l.updateSurveyTemplateType=r,l.deleteSurveyTemplate=i,l.fetchProjectsVisualIdentity=s,l.updateVisualIdentityConfiguration=c}angular.module("otusDomain.project.configuration").service("otusjs.otus-domain.project.configuration.ProjectConfigurationService",e),e.$inject=["OtusRestResourceService","$q"]}(),function(){"use strict";function e(e){function t(e){return i.enableExtraction(e).$promise}function o(e){return i.disableExtraction(e).$promise}function n(e){return i.updateExtractionIps(e).$promise}var r=this,i=e.getExtractionResource();r.enableExtraction=t,r.disableExtraction=o,r.updateExtractionIps=n}angular.module("otusDomain.project").service("ExtractionRestService",e),e.$inject=["OtusRestResourceService"]}(),function(){"use strict";function e(){function e(e){t.fieldCenters=e}var t=this;t.fieldCenters=[],t.setFieldCenters=e}angular.module("otusDomain.project.fieldCenter").service("ProjectFieldCenterContext",e)}(),function(){"use strict";function e(e,t,o){function n(){return e.getCenters()}function r(e){e.editMode=!e.editMode}function i(t){e.update(t,function(e){e.hasErrors||o.show(o.simple().textContent(s))})}function a(){t.show({templateUrl:"app/project/fieldCenter/dialog/create-field-center-template.html",clickOutsideToClose:!0,controller:"CreateFieldCenterController",controllerAs:"createFieldCenter"})}var s="Centro atualizado",c=this;c.getAllCenters=n,c.edit=r,c.create=a,c.update=i}angular.module("otusDomain.project.fieldCenter").controller("FieldCenterController",e),e.$inject=["ProjectFieldCenterService","$mdDialog","$mdToast"]}(),function(){"use strict";angular.module("otusDomain.project.fieldCenter",[])}(),function(){"use strict";function e(e,t){function o(){return t.fieldCenters}function n(){var o=e.getOtusFieldCenterResource();o.getAll(function(e){t.setFieldCenters(e.data)},function(){t.setFieldCenters([])})}function r(t,o){var r=e.getOtusFieldCenterResource();r.create(t,function(e){n(),o(e)})}function i(t,o){delete t.editMode;var r=e.getOtusFieldCenterResource();r.update(t,function(e){n(),o(e)})}var a=this;a.loadCenters=n,a.getCenters=o,a.create=r,a.update=i}angular.module("otusDomain.project.fieldCenter").service("ProjectFieldCenterService",e),e.$inject=["OtusRestResourceService","ProjectFieldCenterContext"]}(),function(){"use strict";function e(e,t,o,n,r){function i(){h=e.getUserResource(),C=e.getOtusFieldCenterResource(),S=o.create(h),g(),f(),p()}function a(e){n.show(j).then(function(){e.enable?u(e):l(e)},function(){e.enable=!e.enable})}function s(e){n.show(y).then(function(){e.extraction?d(e):m(e)},function(){e.extraction=!e.extraction})}function c(e){S.updateFieldCenter(angular.toJson(e)).then(function(e){v("Centro atualizado.")})}function u(e){S.enable(e).then(function(e){v("Usuário habilitado.")})}function l(e){S.disable(e).then(function(t){e.extraction&&(e.extraction=!1,m(e)),v("Usuário desabilitado.")})}function f(){S.list().then(function(e){R.users=e.data})}function d(e){t.enableExtraction(e).then(function(e){v("Extração habilitada.")})}function m(e){t.disableExtraction(e).then(function(e){v("Extração desabilitada.")})}function p(){C.getAll(function(e){R.fieldCenters=e.data})}function g(){j=n.confirm().title(U).textContent(T).ok("Sim").cancel("Cancelar"),y=n.confirm().title($).textContent(D).ok("Sim").cancel("Cancelar")}function v(e){r.show(r.simple().textContent(e))}var h,C,j,y,S,R=this,T="Você tem certeza que deseja alterar o status do usuário?",U="Mudança de Status",D="Você tem certeza que deseja alterar o status de Extração do usuário?",$="Mudança de Status para Extração de Dados";R.users=[],R.fieldCenters=[],R.$onInit=i,R.enableDisable=a,R.updateFieldCenter=c,R.enableDisableExtraction=s}angular.module("otusDomain.project").component("otusUser",{templateUrl:"app/project/otus-user/otus-user-template.html",controller:e}),e.$inject=["OtusRestResourceService","ExtractionRestService","UserManagerFactory","$mdDialog","$mdToast"]}(),function(){"use strict";function e(){function e(e){return new t(e)}var o=this;return o.create=e,o}function t(e){function t(t){return e.enable(t).$promise}function o(t){return e.disable(t).$promise}function n(){return e.list().$promise}function r(t){return e.updateFieldCenter(t).$promise}var i=this;i.enable=t,i.disable=o,i.list=n,i.updateFieldCenter=r}angular.module("otusDomain.project").factory("UserManagerFactory",e)}(),function(){"use strict";function e(e,t){function o(){f=[]}function n(e){l=e,c()}function r(){return l}function i(){return null!==l}function a(n){o();var r=e.getOtusProjectResource();r.list(function(e){e.data.forEach(function(e,o,n){var r=e.projectName,i=e.projectRestUrl,a=e.projectToken,s=t.create(r,i,a);f.push(s)}),n(f)})}function s(e){d.push(e)}function c(){d.forEach(function(e){e(l)})}var u=this,l=null,f=[],d=[];u.setProject=n,u.hasProject=i,u.getCurrentProject=r,u.loadProjects=a,u.registerObserver=s}angular.module("otusDomain.project").service("ProjectContext",e),e.$inject=["RestResourceService","ProjectFactory"]}(),function(){"use strict";function e(e,t,o){function n(t){e.setUrl(t.url);var o=e.getOtusInstallerResource();o.ready(function(e){e.data?t.online():t.offline()},function(){t.offline()})}function r(o){var n=t.defer();e.setUrl(o.url);var r=o.getAuthentication(),i=e.getOtusAuthenticatorResource();return i.authenticateProject(r,function(e){e.data?n.resolve(e):n.reject(e)}),n.promise}var i=this;i.isOnline=n,i.authenticate=r}angular.module("otusDomain.project").service("ProjectSecurityService",e),e.$inject=["OtusRestResourceService","$q","ProjectContext"]}(),function(){"use strict";function e(e,t){function o(){e.hasProject()||n()}function n(){e.loadProjects(function(e){r(e)})}function r(e){t.show({controller:"ProjectChooseController as projectChoose",templateUrl:"app/project/selection/ui/dialog/project-choose-template.html",parent:angular.element(document.body),clickOutsideToClose:!0,fullscreen:!0,locals:{projects:e}})}var i=this;i.choose=n,i.initialChoose=o}angular.module("otusDomain.project").service("ProjectSelectionService",e),e.$inject=["ProjectContext","$mdDialog"]}(),function(){"use strict";function e(e){function t(){a=e.getRepositoryResource()}function o(e){a.create(e,function(e){return!e.data.hasError})}function n(e){a.validateConnection(e,function(e){return e.data})}function r(e){a.getByRepositoryName({repositoryName:e.name},function(e){return e.data})}function i(e){a.validateCredentials(e,function(e){return e.data})}var a,s=this;s.createRepository=o,s.validateRepositoryConnection=n,s.validateIfRepositoryAlreadyExists=r,s.validateRepositoryCredentials=i,t()}angular.module("otusDomain.repository").service("RepositoryService",e),e.$inject=["RestResourceService"]}(),function(){function e(e){e.interceptors.push("otusDomain.ResponseInterceptor")}angular.module("otusDomain").config(["$httpProvider",e])}(),function(){"use strict";function e(e){function t(t){e.get("DashboardStateService");return t}var o=this;return o.responseError=t,o}angular.module("otusDomain").factory("otusDomain.ResponseInterceptor",e),e.$inject=["$injector"]}(),function(){"use strict";function e(e){function t(){e.goToLogin()}var o=this;o.tryAgain=t}angular.module("otusDomain").controller("ResponseErrorOfflineController",e),e.$inject=["DashboardStateService"]}(),function(){"use strict";function e(e,t,o,n){function r(t){var n=o.defer(),r=e.getAuthenticatorResource();return r.authenticate(t,function(e){e.data?(s(e.data),n.resolve()):n.reject()}),n.promise}function i(){var t=o.defer(),n=e.getAuthenticatorResource();return n.invalidate(function(){c(),t.resolve()},function(){t.reject()}),t.promise}function a(){n.reloadCurrentUser()}function s(t){e.setSecurityToken(t.token),n.setCurrentUser(t)}function c(){n.removeCurrentUser(),e.removeSecurityToken(),t.removeSecurityToken()}function u(){return n.getCurrentUser()}var l=this;l.getLoggedUser=u,l.authenticate=r,l.logout=i,l.reloadLoggedUser=a}angular.module("otusDomain.user").service("UserService",e),e.$inject=["RestResourceService","OtusRestResourceService","$q","UserContext"]}(),function(){"use strict";function e(e){function t(){i.currentUser=null}function o(e){i.currentUser=e}function n(){return i.currentUser}function r(){if(e.isLogged()){var t=e.getUserResource();t.current(function(e){o(e.data)})}}var i=this;i.currentUser=null,i.setCurrentUser=o,i.getCurrentUser=n,i.reloadCurrentUser=r,i.removeCurrentUser=t}angular.module("otusDomain.user").service("UserContext",e),e.$inject=["RestResourceService"]}(),function(){"use strict";angular.module("otusDomain.user.management",["passwordControl"])}(),function(){"use strict";function e(e){function o(){a.dialogSettings={parent:angular.element(document.body),templateUrl:"app/dashboard/dialog/logout/logout-dialog.html",controller:t,controllerAs:"controller",openFrom:"#system-toolbar",closeTo:{bottom:0}}}function n(){return e.show(a.dialogSettings).then(r,i),{onConfirm:function(e){a.callback=e}}}function r(e){"confirm"===e.action&&a.callback&&a.callback(e.data)}function i(e){}var a=this;a.showDialog=n,o()}function t(e){function t(t){e.hide(t)}function o(t){e.hide(t)}var n=this;n.cancel=t,n.confirm=o}angular.module("otusDomain.dashboard").service("LogoutDialogService",e),e.$inject=["$mdDialog"]}(),function(){"use strict";function e(e){function t(t,o,n){function r(t){var o=e.uploadTypeResolver(t);return""!==o?(i=document.createElement("input"),i.setAttribute("type","file"),i.setAttribute("accept",o)):i=document.createElement("button"),i}var i,a=t.uploadTool,s=a.callback||{},c=a.type||"any";o.on("click",function(e){i=r(c),i.click(),i.addEventListener("change",function(){for(var e=[],t=0;t<this.files.length;t++)e.push(this.files[t]);0!==e.length&&s(e)})})}var o={restrict:"A",link:t,scope:{uploadTool:"="}};return o}angular.module("otusDomain.project.configuration").directive("uploadTool",e),e.$inject=["otusjs.otus-domain.project.configuration.UploadToolService"]}(),function(){"use strict";function e(){function e(e){var o="";if(e){e=e.replace(/\s/g,"").split(",");for(var n=0;n<e.length;n++){var r=t(e[n]);r&&(o+=r+", ")}}return o||"any"}function t(e){var t={image:"image/*",jpg:".jpg",png:".png",json:".json"};return t[e]}var o=this;o.uploadTypeResolver=e}angular.module("otusDomain.project.configuration").service("otusjs.otus-domain.project.configuration.UploadToolService",e),e.$inject=[]}(),function(){"use strict";function e(e,t,o,n){function r(){t.cancel()}function i(e){o.create(e,function(t){t.hasErrors?a(e,t):(c(),r())})}function a(t,o){e.createForm.acronym.$setValidity(o.data.errorType,!1)}function s(){e.createForm.acronym.$setValidity("ALREADY_EXIST",!0)}function c(){n.show(n.simple().textContent(u))}var u="Centro Adicionado com Sucesso",l=this;l.close=r,l.create=i,l.resetValidation=s}angular.module("otusDomain.project.fieldCenter").controller("CreateFieldCenterController",e),e.$inject=["$scope","$mdDialog","ProjectFieldCenterService","$mdToast"]}(),function(){"use strict";function e(e,t,o,n){function r(){l.cloneExtractionIps=angular.copy(l.user.extractionIps),s()}function i(){t.show(u).then(function(){l.cloneExtractionIps=angular.copy(l.user.extractionIps),a(),n.find("#userIp"+l.userIndex).focus()},function(){l.user.extractionIps=angular.copy(l.cloneExtractionIps),n.find("#userIp"+l.userIndex).focus()})}function a(){e.updateExtractionIps(l.user).then(function(e){c("Ip(s) atualizado(s).")})}function s(){u=t.confirm().title(f).textContent(d).ok("Sim").cancel("Cancelar")}function c(e){o.show(o.simple().textContent(e))}var u,l=this,f="Alteração nos IPs de extração",d="Você tem certeza que deseja alterar os IPs de Extração do usuário?";l.$onInit=r,l.onIpChange=i}angular.module("otusDomain.project").component("extractiosIpsField",{templateUrl:"app/project/otus-user/extraction-ips-field/extraction-ips-field-teamplate.html",controller:e,bindings:{user:"=",userIndex:"<"}}),e.$inject=["ExtractionRestService","$mdDialog","$mdToast","$element"]}(),function(){"use strict";function e(e){function o(o,n,r){var i=e.getLoggedUser();return new t(o,n,i.email,r)}var n=this;return n.create=o,n}function t(e,t,n,r){function i(){return l}function a(){u.status=!0}function s(){u.status=!1}function c(e){u.status=e}var u=this,l=new o(n,r);u.name=e,u.url=t,u.status=!1,u.getAuthentication=i,u.online=a,u.offline=s,u.changeStatus=c}function o(e,t){var o=this;o.user=e,o.accessToken=t}angular.module("otusDomain.project").factory("ProjectFactory",e),e.$inject=["UserService"]}(),function(){"use strict";function e(e){function t(t){e.registerObserver(function(e){e?t.show():t.hide()})}var o={retrict:"A",controller:function(e,o,n){e.hasProject()?n.show():n.hide(),t(n)}};return o}angular.module("otusDomain.project").directive("otusWaitingProject",e),e.$inject=["ProjectContext"]}(),function(){"use strict";function e(e,t,o){function n(){u=e.getUserResource(),c()}function r(e){e.enable?a(e):s(e)}function i(e){var o=t.confirm().title(d).textContent(f).ok("Sim").cancel("Cancelar");t.show(o).then(function(){r(e)},function(){e.enable=!e.enable})}function a(e){u.enable(e,function(){o.show(o.simple().textContent("Usuário habilitado."))})}function s(e){u.disable(e,function(){o.show(o.simple().textContent("Usuário desabilitado."))})}function c(){u.list(function(e){l.users=e.data})}var u,l=this,f="Você tem certeza que deseja alterar o status do usuário ?",d="Mudança de Status";l.users=[],l.confirmDialog=i,n()}angular.module("otusDomain.user.management").controller("UserActivationController",e),e.$inject=["RestResourceService","$mdDialog","$mdToast"]}(),function(){function e(e,t,o,n){function r(e){var t=n.getUserResource();t.create(e,function(e){e.data&&a()})}function i(){o.goToLogin()}function a(){var e=t.alert().title("Informação").content(s).ok("ok");t.show(e)["finally"](function(){o.goToLogin()})}var s="Sua liberação está pendente de aprovação.",c=this;c.register=r,c.back=i}angular.module("otusDomain.user.management").controller("UserRegisterController",e),e.$inject=["$http","$mdDialog","DashboardStateService","RestResourceService"]}(),function(){angular.module("otusDomain.user.management").directive("unique",["$http","$q","RestResourceService",function(e,t,o){return{restrict:"A",require:"ngModel",link:function(e,n,r,i){i.$asyncValidators.emailInUse=function(e){var n=t.defer(),r=o.getUserResource();return r.exist({email:e},function(e){e.data?n.reject():n.resolve()}),n.promise}}}}])}(),function(){"use strict";function e(e,t,o){function n(){i()}function r(){var t=e.defer();return t.resolve(!0),t.promise}function i(){r().then(function(e){e.files?m.data=e:m.data={files:{logoURL:p,bannerURL:p},date:""}})["finally"](function(){m.changed=!1})}function a(e){m.progressBanner=!0,c(e).then(function(e){m.data.files.bannerURL=e,m.changed=!0,m.progressBanner=!1})}function s(e){m.progressLogo=!0,c(e).then(function(e){m.data.files.logoURL=e,m.changed=!0,m.progressLogo=!1})}function c(t){var o=e.defer(),n=new FileReader;return n.onload=function(){o.resolve(n.result)},n.readAsDataURL(t[0]),o.promise}function u(){m.changed=!1;var e={files:{logo:m.data.files.logoURL,banner:m.data.files.bannerURL},sendingDate:new Date};t.updateVisualIdentityConfiguration(e,l,f)}function l(){m.data.sendingDate=d(new Date),o.show(o.simple().textContent("Salvo com sucesso"))}function f(){o.show(o.simple().textContent("Falha ao atualizar imagem")),i()}function d(e){return e.toLocaleDateString()+" - "+e.toLocaleTimeString()}var m=this;n(),m.progressBanner=!1,m.progressLogo=!1,m.uploadBanner={callback:a,type:"image"},m.uploadLogo={callback:s,type:"image"},m.save=u;var p="app/assets/img/image_not_found.jpg"}angular.module("otusDomain.project.configuration").component("otusVisualIdentity",{templateUrl:"app/project/configuration/config-components/project-visual-identity-component/project-visual-identity-template.html",controller:e}),e.$inject=["$q","otusjs.otus-domain.project.configuration.ProjectConfigurationService","$mdToast"]}(),function(){"use strict";function e(e,t,o,n){function r(){t.fetchSurveysManagerConfiguration().then(function(e){m.surveyTemplatesList=e,0===m.surveyTemplatesList.length?m.noListInfo="Nenhum formulário adicionado":m.noListInfo=""})["catch"](function(){m.surveyTemplatesList=[],m.noListInfo="Erro de comunicação com servidor"})}function i(e){e.forEach(function(t){"json"===e[0].name.split(".")[1]&&a(t).then(function(e){m.uploadedObject=JSON.parse(e),m.uploadedFile=e,m.disableSaving=!1})})}function a(t){var o=e.defer(),n=new FileReader;return n.onload=function(){o.resolve(n.result)},n.readAsText(t),o.promise}function s(e){n.show(d).then(function(){t.deleteSurveyTemplate(m.surveyTemplatesList[e].surveyTemplate.identity.acronym).then(function(){m.surveyTemplatesList.splice(e,1),o.show(o.simple().textContent("Excluído").hideDelay(2e3))})["catch"](function(){o.show(o.simple().textContent("Erro ao excluir").hideDelay(2e3))})},function(){})}function c(e){var n=m.surveyTemplatesList[e].surveyTemplate.identity.acronym,r=m.surveyTemplatesList[e].surveyFormType;t.updateSurveyTemplateType({acronym:n,type:r}).then(function(){o.show(o.simple().textContent("Alterado com sucesso").hideDelay(2e3))})["catch"](function(){o.show(o.simple().textContent("Erro ao alterar.").hideDelay(2e3)),"PROFILE"===r?m.surveyTemplatesList[e].surveyFormType="FORM_INTERVIEW":m.surveyTemplatesList[e].surveyFormType="PROFILE"})}function u(){t.publishTemplate(m.uploadedFile).then(function(e){l(e)})["catch"](function(e){f(e)})}function l(e){m.uploadedObject={},m.uploadedFile={},m.disableSaving=!0,m.surveyTemplatesList.push(e),o.show(o.simple().textContent("Upload realizado com sucesso"))}function f(e){var t="";switch(e){case"Acronym Already Exists":t+="Já existe um formulário com esta sigla";break;case"ID Already Exists":t+="Ids de questões conflitam com as de formulários já existentes";break;default:t+="Erro ao enviar"}o.show(o.simple().textContent(t).hideDelay(2e3))}var d,m=this;this.$onInit=function(){r(),d=n.confirm().title("Exclusão de Formulário").textContent("Você tem certeza que deseja excluir esse Formulário?").ariaLabel("exclusão de formulário").ok("Sim").cancel("Não")},m.publishTemplate=u,m.updateSurveyFormType=c,m.deleteSurveyTemplate=s,m.uploadConfig={callback:i,type:"json"},m.uploadedObject={},m.uploadedFile={},m.disableSaving=!0}angular.module("otusDomain.project.configuration").component("otusSurveysManager",{templateUrl:"app/project/configuration/config-components/surveys-manager/surveys-manager-template.html",controller:e}),e.$inject=["$q","otusjs.otus-domain.project.configuration.ProjectConfigurationService","$mdToast","$mdDialog"];
}(),function(){"use strict";function e(e,t,o,n,r,i,a){function s(){u(h.projects),f()}function c(){t.cancel()}function u(e){e.forEach(function(e){n.isOnline(e)})}function l(e){e.status?n.authenticate(e).then(function(t){d(t.data,e),c()},function(){f(),p()}):m()}function f(){if(i.hasProject()){var e=i.getCurrentProject();a.setUrl(e.projectRestUrl),a.setSecurityToken(e.sessionToken)}}function d(e,t){t.sessionToken=e,a.setSecurityToken(t.sessionToken),i.setProject(t)}function m(){r.show(r.simple().textContent(g))}function p(){r.show(r.simple().textContent(v))}var g="Projeto Offline. Verifique o estado do projeto.",v="Erro ao realizar autenticação no projeto",h=this;h.projects=o,h.close=c,h.select=l,s()}angular.module("otusDomain.project").controller("ProjectChooseController",e),e.$inject=["$scope","$mdDialog","projects","ProjectSecurityService","$mdToast","ProjectContext","OtusRestResourceService"]}(),function(){"use strict";function e(e,t){function o(o,n,r){o.project=t.getCurrentProject(),o.chooseProject=function(){e.choose()},o.hasProject=function(){return t.hasProject()},t.registerObserver(function(e){o.project=e})}var n={templateUrl:"app/project/selection/ui/toolbar/otus-project-selection-toolbar.html",restrict:"E",link:o};return n}angular.module("otusDomain.project").directive("otusProjectSelection",e),e.$inject=["ProjectSelectionService","ProjectContext"]}();
